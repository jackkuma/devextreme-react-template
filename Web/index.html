<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <title>Devextreme App</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn3.devexpress.com/jslib/20.1.6/css/dx.common.css">
    <link rel="stylesheet" href="https://cdn3.devexpress.com/jslib/20.1.6/css/dx.light.css">
    <link rel="stylesheet" href="./css/headerStyle.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn3.devexpress.com/jslib/20.1.6/js/dx.all.js"></script>
    <script>
      const getUrl = window.location.href;
      const getPathName = window.location.pathname;

      if(getUrl.indexOf('?')!=-1) {
        let mID;
        let uip;
        let getQueryString = getUrl.split('?')[1].split('&');
        if(getQueryString[0].indexOf('mID')!=-1) {
          for(i=0;i<=getQueryString.length-1;i++) {
            if(getQueryString[i].split('=')[0] == 'mID'){
              mID = getQueryString[i].split('=')[1];
            }
            if(getQueryString[i].split('=')[0] == 'uip'){
              uip = getQueryString[i].split('=')[1];
            }
          }
        }

        //console.log('user ID: ' + mID);
        //console.log('user IP: ' + uip);
        if(mID !='' && uip !=''){
          window.history.replaceState({}, document.title, getPathName);
        }
      }
    </script>
  </head>
  <body class="dx-viewport">
    <header>
      <div class="container-fluid">
        <div class="row">
          <div class="brand">
            <i class="logo"></i>
          </div>
          <h1>Title - App Name</h1>
          <div class="menu">
            <a href="javascript:;" class="menu-toggle">
              <span></span>
            </a>
            <ul class="nav-panel">
              <li></li>
            </ul>
          </div>
          <ul class="menu-item">
            <li><a href="javascript:;" id="feedback">Issue</a></li>
            <li><a href="javascript:;" id="menuHome">Home</a></li>
          </ul>
        </div>
      </div>
      <div class="model-home">
        <a href="#">Index</a>
        <div id="itemList">
        </div>
      </div>
    </header>
    <div class="img-box">
      <span class="photo" style="background-image: url(../logo192.png)"></span>
      <span class="photo" style></span>
    </div>
  </body>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  <script src="js/homeMenu.js"></script>
  <script>
    const strUrl = location.search;
    let getPara
    let ParaVal;
    let aryPara = [];
    let aryStr = [];
    

  if (strUrl.indexOf("?") != -1) {
    let getSearch = strUrl.split("?");
    getPara = getSearch[1].split("&");
    data = getPara[1].replace("(","");
    data2 = data.replace(")","");
    let getStr = new Array();
    getStr = data2.split(",");
    
    for(i=0; i<=getStr.length-1; i++) {
      //如果資料名稱為productName的話那就把他取出來
      if(getStr[i].split("=")[0] === "productName"){
        productName = getStr[i].split("=")[1];
        aryPara.push(productName);
      }
      //如果資料名稱為testString的話那就把他取出來
      if(getStr[i].split("=")[0] === "testString"){
        testString = getStr[i].split("=")[1];
        aryStr.push(testString);
      }
    }
    // console.log(aryStr)
    // console.log(aryPara)
    sendProductName();
    // sendTestString();
    // sendValue();
    // for (let i = 0; i < getStr.length; i++) {
    //   ParaVal = getStr[i].split("=");
    //   console.log(ParaVal);
    //   // aryPara.push(ParaVal[0]);
    //   // aryPara[ParaVal[0]] = ParaVal[1];
    // }
  }

  // function sendValue() {
  //   for(i=0; i < aryPara.length; i++) {
  //     for(j=0; j < aryStr.length; j++) {
  //       setTimeout(function(){
  //         console.log('送出了 productName：' + aryPara[i] + ' testString：' + aryStr[j]);
  //       }, 1000);
  //     }
  //   }
  // }

  function sendProductName() {
    for (let i = 0; i < aryPara.length; i++) {
      let aryNum = i;
      setTimeout(function() {
        console.log('送出了：' + aryPara[i]);
      }, 1000 * (i + 1));
    }
      // for(let i=0; i < aryPara.length; i++) {
      //   console.log('送出了：' + aryPara[i]);
      // }
  }

  // function sendTestString() {
  //     for(i=0; i < aryStr.length; i++) {
  //       console.log('送出了：' + aryStr[i]);
  //     }
  // }

  // let productName = [];
  // let testString = [];
    // function GetRequest() {
    //   let queryUrl = window.location.href;
    //   let getRequest = new Object;

    //     if (queryUrl.indexOf("?") != -1) {
    //         var str = queryUrl.substr(1);
    //         strs = str.split("&")
    //         data = strs[1].replace("(","");
    //         data2 = data.replace(")","");
    //         console.log(data2);
    //         let getStr = new Array();
    //         getStr = data2.split(",");
    //         for (var i = 0; i < getStr.length; i++) {
    //             getRequest[getStr[i].split("=")[0]] = unescape(getStr[i].split("=")[1]);
    //             console.log(getRequest[i]);
    //             //productName.push("Kiwi");
    //         }
    //         // let productName = getRequest.productName;
    //         // let testString = getRequest.testString;

    //         //     console.log(productName);
    //         //     console.log(testString);
    //     }
    // }

    // GetRequest();

    $(document).ready(function(){
      $('.model-home').hide();
      $('.nav-panel').hide();

      $( "#menuHome" ).click(function() {
        $('.model-home').toggle(300);
      });

      $('.menu-toggle').click(function () {
        $('.menu').toggleClass('nav-open');
        $('.nav-panel').toggle(300);
      });
      
      $('.photo[style^=background]').css("cursor", "pointer");
    });
  </script>
</html>
